<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <title>OpenSplice DDS Release Notes - Changes and Fixed Bugs V3.4.3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="../css/prismstyle.css" type="text/css">
  </head>
  <body>
    <p class="back">
      <a href="releasenotes.html">
        Back to Release Notes Page<img src="../images/back.gif" align="middle" 
        height="25" width="30" alt="Back">
      </a>
    </p>

    <h1>Fixed Bugs and Changes V3.4.3</h1>
    <h2>Contents</h2>
    <ul>
      <li><a href="#issues_not_api">Fixed Bugs and Changes not affecting API</a></li>
      <li><a href="#issues_api">Fixed Bugs and Changes affecting API</a></li>
    </ul>
    <hr>
    This page contains a list of all bugfixes and changes incorporated in 
    OpenSplice V3.4.3<br/>
    <h2><a name="issues_not_api">Fixed Bugs and Changes not affecting API</a></h2>
      <p>
        <table width="90%">
        <tr>
          <th width="14%">
            Report ID.
          </th>
          <th width="86%">
            Description
          </th>
        </tr>
        <tr>
          <td>
            5239<br/>
            dds664
          </td>
          <td>
            <b>
              The OpenSplice DDS daemon does not shut down cleanly when you log off windows
            </b><br/>
            <i>
              When a user logs off on Windows then OpenSplice DDS cannot close cleanly.  Worse still, 
              the Windows "End Now" prompt for the various OpenSplice applications stops the log out
              procedure from completing. I have to kill 4 or 5 applications before the logout completes.<br/>
              <b>Solution:</b> The log off event was not caught by the OpenSplice DDS services, resulting in
              the Windows "End Now" prompt being shown. The services now acts on log-off and shutdown events
              and the services terminate.<br/>
              <b>Note:</b> Although applications are automatically disconnected from DDS, it is still the
              responsibility of the application to terminate. Once an application is disconnected every DDS
              call will either return <code>NULL</code> or <code>RETCODE_ALREADY_DELETED</code>. 
            </i>
          </td>
        </tr>
        <tr>
          <td>
            5942<br/>
            dds984
          </td>
          <td>
            <b>
              Application Termination hangs on Windows
            </b><br/>
            <i>
              There was a problem getting our example to work with OpenSplice DDS. In a nutshell, the
              failure of the primary, which is commonly simulated by calling exit(), was hanging on the
              native exit() system call. Evidently, OpenSplice DDS is registering something with each
              process that the native exit() can't clean up. Cleanup code for the various DDS entities
              is already is place, so if I call that code just before exit(), then everything worked
              fine.<br/>
              <b>Solution:</b> When an application calls exit() directly from its program, Windows will
              create a new thread and terminate all running threads for the process, without the possibility
              for the threads to cleanup resources or leave critical sections. Two solutions are available
              for properly terminating an OpenSplice DDS application:
              <ul>
                <li>
                  the OpenSplice DDS application will detect a termination request and use the DDS cleanup
                  functions to disconnect from a DDS domain. So in a nutshell terminate all threads and
                  delete all DDS entities.
                </li>
                <li>
                  let OpenSplice DDS handle application termination, but then the application should follow
                  the following rules:
                  <ul>
                    <li>
                      For console applications: send control message to the console by calling
                      GenerateConsoleCtrlEvent(), which will be caught by the OpenSplice DDS library, which
                      will disconnect cleanly from the DDS domain.
                    </li>
                    <li>
                      For MFC applications: send WM_QUIT message to the main window, which will be caught
                      by the OpenSplice DDS library, which will disconnect cleanly from the DDS domain.
                    </li>
                    <li>
                      For any type of application: never call any of the functions exit(), ExitProcess(), 
                      TerminateProcess() or allow the main thread to return.
                    </li>
                  </ul>
                </li>
              </ul>
              In general it is good practice to implement the termination detection in your application
              and then use the cleanup functions to disconnect from a DDS domain.  
            </i>
          </td>
        </tr>
        <tr>
          <td>
            dds1062
          </td>
          <td>
            <b>
              Windows: example project files with debug configuration incorrect
            </b><br/>
            <i>
              The Visual Studio project files delivered with the examples have 2 configurations: 'Debug' and
              'Release'. The 'Debug' configuration is not configured properly and does not result in
              executables with debug information.<br/>
              <b>Solution:</b> All the project files have been adapted accordingly.
            </i>
          </td>
        </tr>
        </table>
      </p>
      
    <h2><a name="issues_api">Fixed Bugs and Changes affecting API</a></h2>
      <p>
        No changes were made affecting the API.
      </p>
    <br/>
    <hr>
    <p>
      <a target="_top" href="http://www.prismtech.com">
      <img src="../images/logo_prismtech2.jpg" align="right"
           width="112" height="29" border="0" alt="PrismTech"></a> 
      <a href="#top" target="_self">
      <img src="../images/top.gif" width="32" 
           height="32" border="0" alt="TOP"></a><br/>
      <a href="#top" target="_self">Top</a>
    </p>
  </body>
</html>
