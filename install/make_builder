. ${OSPL_HOME}/install/make_functions

echo $*

installer_setup $*

OSPL_BUILDER_APP=`echo $OSPL_BUILDER | awk -F'/' '{ print $NF }'`

if [ "${OSPL_BUILDER_APP}" != "builder" ]
then
   PLATFORM=${SOURCE_TARGET}${TARGET_ENV}
   if [ -z "${OSPL_BUILDER}" ]
   then
       OUT=${OUTPUTDIR}/OpenSpliceDDS${PACKAGE_VERSION}-${PLATFORM}-${INSTTYPE}

       # If empty try zip or tar depending upon platform

       if [ "${BUILDER_TARGET}" = "windows" ]
       then
          OSPL_BUILDER=`which zip`
          if [ "$?" != "0" ]
          then
             echo "Error - No packager found please set OSPL_BUILDER"
             return 1
          else
             echo ${OSPL_BUILDER} -r ${OUT}.zip ${INSTTYPE}
             ${OSPL_BUILDER} -r ${OUT}.zip ${INSTTYPE}
          fi
       else
          OSPL_BUILDER=`which tar`
          if [ "$?" != "0" ]
          then
             echo "Error - No packager found please set OSPL_BUILDER"
             return 1
          else
             echo ${OSPL_BUILDER} -cf ${OUT}.tar ${INSTTYPE}
             ${OSPL_BUILDER} -cf ${OUT}.tar ${INSTTYPE}
          fi
       fi
   else
       # Else not empty try using it !

       echo ${OSPL_BUILDER} ${OUT} ${INSTTYPE}
       ${OSPL_BUILDER} ${OUT} ${INSTTYPE}
   fi
fi